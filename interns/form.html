<!doctype html>
<html lang="en">
  <head>
 
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Hello, world!</title>
	  <script>
		  const query = window.location.href.split("=")[1];

		  const redirectToQuiz = () => {
			  console.log("query :- ", query, window.location.href);
				  window.location.href = "/quiz-" + query;
			
		  }

		
		  const onSubmit = () => {
			
		const formBody = {
			name: document.getElementById("name_field").value,
			age: document.querySelector("#age_filed").value,
			gender: document.getElementsByName("name").value,
			fluency: document.getElementsByName("fluency").value,
			year_of_study: document.querySelector("#year_of_study_field").value,
			gpa: document.querySelector("#gpa_field").value,
			email: document.querySelector("#email_field").value,
			projects: document.querySelector("#project_field").value,
		}


			  console.log("SUBMIT")
			  fetch("http://localhost:3000/api/saveForm", {
				  method: "POST",
				  body: JSON.stringify(formBody),
				  headers: {
					'Content-Type': 'application/json'
					// 'Content-Type': 'application/x-www-form-urlencoded',
					},
			  }).then(val => {
				  console.log("submitted")
				  redirectToQuiz();
			  }).catch(console.log);
		  }

	  </script>
  </head>

  <body>
	
    <center><h2> <font color="black" face="CHARLESWORTH">FORM DETAILS</h2></center>
		<table cellpadding="25px"  border="3" align="center">
			<tr>
				<td > <label> <font color="blue"> NAME </label> </font></td>
				<td> <input id="name_field" type="text" > </td>
			</tr>
			<tr>
				<td> <label ><font color="blue"> AGE </font></label>
				<td> <input id="age_filed" type="number"> </td>
			</tr>
			<tr>
				<td> 
				<font color="blue"> GENDER </font>
				</td>
				<td> 
					<input type="radio" name="gender" >:MALE
					<input type="radio" name="gender">:FEMALE
					<input type="radio" name="gender">:OTHERS
				</td>
			</tr>
			
			
			<td> <font color="blue"> FLUENCY </font></td>
			<td>
				<input type="checkbox" name="fluency">TELUGU
				<input type="checkbox" name="fluency">HINDI
				<input type="checkbox" name="fluency">ENGLISH
			</td>

            <tr>
                <td><font color="blue">YEAR OF STUDY</font></td>
                <td>
                    <input id="year_of_study_field" type='number'>
                </td>
            </tr>
			
			<tr>
			<td> <font color="blue">GPA </font></td>
			<td> <input id="gpa_field" type="number"></td>
			</tr>
	
	
			<tr>
				<td><font color="blue">PROJECTS</font></td>
				<td> <input id="project_field"  type="number"> </td>
			</tr>
			
			
			<tr>
				<td><font color="blue">EMAIL</font></td>
				<td> <input id="email_field" type="email"></td>
			</tr>
			
			<tr>
				<td>
				</td>
				<td>
					<button type="submit" onClick="onSubmit()"> <font color="red">SUBMIT</font></button>
					&nbsp;
					&nbsp;
					
					<button type="reset"><font color="red">RESET</font></button>
				</td>
			</tr>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    
  </body>
</html>
